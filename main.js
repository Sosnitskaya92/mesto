(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o,i,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._likes=e.likes,this._owner=e.owner._id,this.id=e._id,this._userId=n,this._cardSelector=r,this._handleCardClick=o,this._handleLikeClick=i,this._handleDeleteCard=u}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"deleteElement",value:function(){this._element.remove(),this._element=null}},{key:"_setEventListners",value:function(){var e=this;this._element.querySelector(".element__heart").addEventListener("click",(function(){return e._handleLikeClick(e)})),this._element.querySelector(".element__delete").addEventListener("click",(function(){return e._handleDeleteCard(e)})),this._element.querySelector(".element__image").addEventListener("click",(function(){return e._handleCardClick(e._link,e._name)}))}},{key:"generateCard",value:function(){this._element=this._getTemplate(),this._setEventListners(),this.handleDeleteButton(),this.updateLikeButton();var e=this._element.querySelector(".element__image");return this._element.querySelector(".element__title").textContent=this._name,e.src=this._link,e.alt=this._name,this._element.querySelector(".element__heart-number").textContent=this._likes.length,this._element}},{key:"checkCardOwner",value:function(){if(this._userId===this._owner)return!0}},{key:"handleDeleteButton",value:function(){!0===this.checkCardOwner()?this._element.querySelector(".element__delete").classList.remove("element__delete_inactive"):this._element.querySelector(".element__delete").classList.add("element__delete_inactive")}},{key:"isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}},{key:"updateLikeButton",value:function(){this.isLiked()?this._element.querySelector(".element__heart").classList.add("element__heart_active"):this._element.querySelector(".element__heart").classList.remove("element__heart_active")}},{key:"_updateLikeNumber",value:function(){this._element.querySelector(".element__heart-number").textContent=this._likes.length,this._element.querySelector(".element__heart").classList.toggle("element__heart_active")}},{key:"setLikes",value:function(e){this._likes=e,this._updateLikeNumber()}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialArray=r,this._renderer=o,this._container=document.querySelector(n)}var t,r;return t=e,(r=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._initialArray.forEach((function(t){e._renderer(t)}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._validationConfig=t,this._elementForm=n,this._submitButton=this._elementForm.querySelector(this._validationConfig.submitButtonSelector),this._inputList=Array.from(this._elementForm.querySelectorAll(this._validationConfig.inputSelector))}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._elementForm.querySelector(".".concat(e.id,"-error"));e.classList.add(this._validationConfig.inputErrorClass),n.textContent=t,n.classList.add(this._validationConfig.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._elementForm.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._validationConfig.inputErrorClass),t.classList.remove(this._validationConfig.errorClass),t.textContent=""}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"toogleButtonState",value:function(){this._hasInvalidInput()?(this._submitButton.setAttribute("disabled",!0),this._submitButton.classList.add(this._validationConfig.inactiveButtonClass)):(this._submitButton.removeAttribute("disabled"),this._submitButton.classList.remove(this._validationConfig.inactiveButtonClass))}},{key:"_setEventListener",value:function(){var e=this;this.toogleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e.toogleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListener()}},{key:"resetErrorValidation",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.closePopup()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"openPopup",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"closePopup",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close"))&&e.closePopup()}))}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=f(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},l.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function h(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._submitFormFunction=t,n._form=n._popup.querySelector(".popup__form"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this._form.querySelectorAll(".popup__input"),t={};return e.forEach((function(e){return t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(){var e=this;l(d(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._popup.querySelector(".popup__save").textContent="Сохранение...",e._submitFormFunction(e._getInputValues()),e.closePopup()}))}},{key:"backTextButtonSave",value:function(){this._popup.querySelector(".popup__save").textContent="Сохранить"}},{key:"backTextButtonCreat",value:function(){this._popup.querySelector(".popup__save").textContent="Создать"}},{key:"closePopup",value:function(){this._form.reset(),l(d(u.prototype),"closePopup",this).call(this)}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(a);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function m(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=g(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},k.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(n);if(r){var o=w(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return m(this,e)});function i(e){var t,n,r,u,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a=function(e,r){n._imagePopupPicture=n._popup.querySelector(".popup__image"),n._subtitlePopup=n._popup.querySelector(".popup__subtitle"),n._imagePopupPicture.src=e,n._imagePopupPicture.alt=r,n._subtitlePopup.textContent=r,k((t=b(n),w(i.prototype)),"openPopup",t).call(t)},(u="openPopupImage")in(r=b(n=o.call(this,e)))?Object.defineProperty(r,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[u]=a,n}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(a);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=C(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},E.apply(this,arguments)}function C(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function L(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._form=document.querySelector(".popup__form_delete"),t}return t=u,(n=[{key:"handleSubmit",value:function(e){this._submitHandler=e}},{key:"setEventListeners",value:function(){var e=this;E(q(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitHandler()}))}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(a);function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(t),this._job=document.querySelector(n),this._avatar=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,job:this._job.textContent}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._job.textContent=e.about}},{key:"setAvatar",value:function(e){this._avatar.src=e.avatar}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U,x=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return fetch(this._baseUrl,{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch(this._baseUrl,{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"editUserInfo",value:function(e){return fetch(this._baseUrl,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"addCard",value:function(e){return fetch(this._baseUrl,{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"putCardLike",value:function(e){return fetch("".concat(this._baseUrl,"/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"deleteCardLike",value:function(e){return fetch("".concat(this._baseUrl,"/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}},{key:"editAvatar",value:function(e){return fetch(this._baseUrl,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}))}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),D={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},A=document.querySelector(".profile__edit"),V=document.querySelector(".profile__add"),F=document.querySelector(".profile__avatar_edit"),N=document.querySelector(".popup__input_type_name"),z=document.querySelector(".popup__input_type_info"),H=document.querySelector(".popup_edit"),J=document.querySelector(".popup_add"),G=document.querySelector(".popup_edit-avatar"),M=document.querySelector(".elements"),K=new B(".profile__title",".profile__text",".profile__avatar"),Q=new i(D,H);Q.enableValidation();var W=new i(D,J);W.enableValidation();var X=new i(D,G);X.enableValidation();var Y=new P(".popup_open");Y.setEventListeners();var Z=new _(".popup_edit",(function(e){ne.editUserInfo(e).then((function(e){fe(e)})).finally((function(){Z.closePopup()}))}));Z.setEventListeners();var $=new _(".popup_add",(function(e){re.addCard(e).then((function(e){M.prepend(le(e))})).finally((function(){$.closePopup()}))}));$.setEventListeners();var ee=new _(".popup_edit-avatar",(function(e){!function(e){oe.editAvatar(e).then((function(e){ue(e)})).finally((function(){ee.closePopup()}))}(e)}));ee.setEventListeners();var te=new T(".popup_delete");te.setEventListeners();var ne=new x({baseUrl:"https://mesto.nomoreparties.co/v1/cohort36/users/me",headers:{authorization:"9bb3333e-8dc8-44bf-a219-29f503167caa","Content-Type":"application/json"}}),re=new x({baseUrl:"https://mesto.nomoreparties.co/v1/cohort36/cards",headers:{authorization:"9bb3333e-8dc8-44bf-a219-29f503167caa","Content-Type":"application/json"}}),oe=new x({baseUrl:"https://mesto.nomoreparties.co/v1/cohort36/users/me/avatar",headers:{authorization:"9bb3333e-8dc8-44bf-a219-29f503167caa","Content-Type":"application/json"}}),ie=new x({baseUrl:"https://mesto.nomoreparties.co/v1/cohort36/cards",headers:{authorization:"9bb3333e-8dc8-44bf-a219-29f503167caa","Content-Type":"application/json"}});function ue(e){K.setAvatar(e)}function ae(e,t){Y.openPopupImage(e,t)}function ce(e){te.openPopup(),te.handleSubmit((function(){re.deleteCard(e.id).then((function(){e.deleteElement()})).then((function(){te.closePopup()}))}))}function se(e){e.isLiked()?ie.deleteCardLike(e.id).then((function(t){e.setLikes(t.likes)})):ie.putCardLike(e.id).then((function(t){e.setLikes(t.likes)})),console.log(e)}function le(e){return new t(e,U,".element__template",ae,se,ce).generateCard()}function fe(e){K.setUserInfo(e)}ne.getUserInfo().then((function(e){U=e._id,fe(e)})).catch((function(e){console.log(e)})),re.getInitialCards().then((function(e){var t=new r({items:e,renderer:function(e){t.addItem(le(e))}},".elements");t.renderItems()})).catch((function(e){console.log(e)})),ne.getUserInfo().then((function(e){ue(e)})).catch((function(e){console.log(e)})),A.addEventListener("click",(function(){Z.backTextButtonSave(),K.getUserInfo(),N.value=K.getUserInfo().name,z.value=K.getUserInfo().job,Z.openPopup(),Q.resetErrorValidation()})),V.addEventListener("click",(function(){$.backTextButtonCreat(),$.openPopup(),W.toogleButtonState(),W.resetErrorValidation()})),F.addEventListener("click",(function(){ee.backTextButtonSave(),ee.openPopup(),X.resetErrorValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MEIscUJBQ2hCMUIsR0FBZ0JTLFlBQ2hCckIsRUFBb0J1QywyQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGUuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgdXNlcklkLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlTGlrZUNsaWNrLCBoYW5kbGVEZWxldGVDYXJkKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX293bmVyID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICB0aGlzLmlkID0gZGF0YS5faWQ7ICBcclxuXHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgXHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkID0gaGFuZGxlRGVsZXRlQ2FyZDtcclxuICB9O1xyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JylcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBkZWxldGVFbGVtZW50KCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH07XHJcblxyXG4gIF9zZXRFdmVudExpc3RuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2hlYXJ0XCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzKSk7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZGVsZXRlXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCh0aGlzKSk7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbGluaywgdGhpcy5fbmFtZSkpO1xyXG4gIH1cclxuICBcclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdG5lcnMoKTtcclxuICAgIHRoaXMuaGFuZGxlRGVsZXRlQnV0dG9uKCk7XHJcbiAgICB0aGlzLnVwZGF0ZUxpa2VCdXR0b24oKTtcclxuXHJcbiAgICBjb25zdCBlbGVtZW50SW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190aXRsZScpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIGVsZW1lbnRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgZWxlbWVudEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faGVhcnQtbnVtYmVyJykudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBjaGVja0NhcmRPd25lcigpIHtcclxuICAgIGlmICh0aGlzLl91c2VySWQgPT09IHRoaXMuX293bmVyKSB7XHJcbiAgICAgIHJldHVybih0cnVlKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlRGVsZXRlQnV0dG9uKCkge1xyXG4gICAgaWYgKHRoaXMuY2hlY2tDYXJkT3duZXIoKSA9PT0gdHJ1ZSkge1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19kZWxldGUnKS5jbGFzc0xpc3QucmVtb3ZlKCdlbGVtZW50X19kZWxldGVfaW5hY3RpdmUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZScpLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX2RlbGV0ZV9pbmFjdGl2ZScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUob3duZXIgPT4gb3duZXIuX2lkID09PSB0aGlzLl91c2VySWQpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlTGlrZUJ1dHRvbigpIHtcclxuICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19oZWFydCcpLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX2hlYXJ0X2FjdGl2ZScpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19oZWFydCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2VsZW1lbnRfX2hlYXJ0X2FjdGl2ZScpfVxyXG4gIH1cclxuXHJcbiAgX3VwZGF0ZUxpa2VOdW1iZXIoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19oZWFydC1udW1iZXInKS50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2hlYXJ0JykuY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9faGVhcnRfYWN0aXZlJylcclxuICB9XHJcbiAgXHJcbiAgc2V0TGlrZXMoZGF0YUNhcmQpIHtcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YUNhcmQ7XHJcbiAgICB0aGlzLl91cGRhdGVMaWtlTnVtYmVyKCk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3Ioe2l0ZW1zLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pbml0aWFsQXJyYXkgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcblxyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pbml0aWFsQXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pOyBcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uQ29uZmlnLCBlbGVtZW50Rm9ybSkge1xyXG4gICAgdGhpcy5fdmFsaWRhdGlvbkNvbmZpZyA9IHZhbGlkYXRpb25Db25maWc7XHJcbiAgICB0aGlzLl9lbGVtZW50Rm9ybSA9IGVsZW1lbnRGb3JtO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZWxlbWVudEZvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl92YWxpZGF0aW9uQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9ICBBcnJheS5mcm9tKHRoaXMuX2VsZW1lbnRGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZWxlbWVudEZvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5lcnJvckNsYXNzKTsgICBcclxuICB9XHJcbiAgXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZWxlbWVudEZvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gIH07XHJcblxyXG4gIF9pc1ZhbGlkKGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICB0b29nbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7IFxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVyKCkge1xyXG4gICAgdGhpcy50b29nbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faXNWYWxpZChpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudG9vZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG4gIFxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKCk7XHJcbiAgfTtcclxuXHJcbiAgcmVzZXRFcnJvclZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXHJcbiAgICB9KTtcclxuICB9XHJcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW5Qb3B1cCgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlUG9wdXAoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlJykpIHtcclxuICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTsgXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEZvcm1GdW5jdGlvbikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9zdWJtaXRGb3JtRnVuY3Rpb24gPSBzdWJtaXRGb3JtRnVuY3Rpb247XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcclxuICAgIFxyXG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgICBpbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZScpLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEZvcm1GdW5jdGlvbih0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGJhY2tUZXh0QnV0dG9uU2F2ZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZScpLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QuNGC0YxcIlxyXG4gIH1cclxuXHJcbiAgYmFja1RleHRCdXR0b25DcmVhdCgpIHtcclxuICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZScpLnRleHRDb250ZW50ID0gXCLQodC+0LfQtNCw0YLRjFwiXHJcbiAgfVxyXG4gIFxyXG4gIGNsb3NlUG9wdXAoKSB7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZVBvcHVwKCk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcbiAgXHJcbiAgb3BlblBvcHVwSW1hZ2UgPSAobGluayxuYW1lKSA9PiB7XHJcbiAgICB0aGlzLl9pbWFnZVBvcHVwUGljdHVyZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuICAgIHRoaXMuX3N1YnRpdGxlUG9wdXAgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3N1YnRpdGxlJyk7XHJcblxyXG4gICAgdGhpcy5faW1hZ2VQb3B1cFBpY3R1cmUuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2ltYWdlUG9wdXBQaWN0dXJlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9zdWJ0aXRsZVBvcHVwLnRleHRDb250ZW50ID0gbmFtZTtcclxuXHJcbiAgICBzdXBlci5vcGVuUG9wdXAoKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhEZWxldGUgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcil7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fZGVsZXRlJyk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVTdWJtaXQoaGFuZGxlcikge1xyXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IGhhbmRsZXJcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCl7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PntcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIoKVxyXG4gICAgfSk7XHJcbiAgfTtcclxufTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VySW5mbyA9IHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9qb2IudGV4dENvbnRlbnRcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHVzZXJJbmZvO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oaW5mbykge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGluZm8ubmFtZTtcclxuICAgIHRoaXMuX2pvYi50ZXh0Q29udGVudCA9IGluZm8uYWJvdXQ7XHJcbiAgfVxyXG5cclxuICBzZXRBdmF0YXIoZGF0YSkge1xyXG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IGRhdGEuYXZhdGFyXHJcbiAgfVxyXG59IiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aERlbGV0ZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aERlbGV0ZS5qcydcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcclxuaW1wb3J0IHtlbGVtZW50RGVsZXRlLFxyXG4gICAgICAgIHZhbGlkYXRpb25Db25maWcsXHJcbiAgICAgICAgcG9wdXBFZGl0LFxyXG4gICAgICAgIHBvcHVwQWRkLFxyXG4gICAgICAgIHBvcHVwQXZhdGFyLFxyXG4gICAgICAgIG5hbWVQb3B1cCxcclxuICAgICAgICBqb2JQb3B1cCxcclxuICAgICAgICBlZGl0QnRuLFxyXG4gICAgICAgIGFkZEJ0bixcclxuICAgICAgICBlZGl0QnRuQXZhdGFyLFxyXG4gICAgICAgIGVsZW1lbnRzU2VjdGlvbixcclxuICAgICAgICBpbWFnZVBvcHVwU2VsZWN0b3IsXHJcbiAgICAgICAgY2FyZE5ld1NlbGVjdG9yLFxyXG4gICAgICAgIHNlY3Rpb25TZWxlY3RvcixcclxuICAgICAgICBuYW1lUHJvZmlsZVNlbGVjdG9yLFxyXG4gICAgICAgIGpvYlByb2ZpbGVTZWxlY3RvcixcclxuICAgICAgICBhdmF0YXJQcm9maWxlU2VsZWN0b3IsXHJcbiAgICAgICAgZWRpdEZvcm1TZWxlY3RvcixcclxuICAgICAgICBhZGRGb3JtU2VsZWN0b3IsXHJcbiAgICAgICAgZWRpdEF2YXRhclNlbGVjdG9yfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5cclxubGV0IHVzZXJJZCAgICAgICAgXHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhuYW1lUHJvZmlsZVNlbGVjdG9yLCBqb2JQcm9maWxlU2VsZWN0b3IsIGF2YXRhclByb2ZpbGVTZWxlY3Rvcik7XHJcblxyXG4vL9Cy0LDQu9C40LTQsNGG0LjRjyDRhNC+0YDQvFxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwRWRpdCk7XHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwb3B1cEFkZCk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwQXZhdGFyKTtcclxuYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBpbWFnZVdpdGhQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShpbWFnZVBvcHVwU2VsZWN0b3IpO1xyXG5pbWFnZVdpdGhQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcG9wdXBFZGl0Rm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKGVkaXRGb3JtU2VsZWN0b3IsIGVkaXRVc2VySW5mbyk7XHJcbnBvcHVwRWRpdEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHBvcHVwQWRkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKGFkZEZvcm1TZWxlY3Rvciwgc2F2ZU5ld0NhcmQpO1xyXG5wb3B1cEFkZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHBvcHVwRWRpdEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKGVkaXRBdmF0YXJTZWxlY3RvciwgKGRhdGEpID0+IHtlZGl0QXZhdGFyKGRhdGEpfSk7XHJcbnBvcHVwRWRpdEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpXHJcblxyXG5jb25zdCBkZWxldGVXaXRoUG9wdXAgPSBuZXcgUG9wdXBXaXRoRGVsZXRlKGVsZW1lbnREZWxldGUpO1xyXG5kZWxldGVXaXRoUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvQXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQzNi91c2Vycy9tZScsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogJzliYjMzMzNlLThkYzgtNDRiZi1hMjE5LTI5ZjUwMzE2N2NhYScsXHJcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGNhcmRBcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydDM2L2NhcmRzJyxcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiAnOWJiMzMzM2UtOGRjOC00NGJmLWEyMTktMjlmNTAzMTY3Y2FhJyxcclxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICB9XHJcbn0pO1xyXG5cclxuY29uc3QgYXZhdGFyQXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQzNi91c2Vycy9tZS9hdmF0YXInLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICc5YmIzMzMzZS04ZGM4LTQ0YmYtYTIxOS0yOWY1MDMxNjdjYWEnLFxyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gIH1cclxufSk7XHJcblxyXG5jb25zdCBsaWtlQXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQzNi9jYXJkcycsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCI5YmIzMzMzZS04ZGM4LTQ0YmYtYTIxOS0yOWY1MDMxNjdjYWFcIixcclxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICB9XHJcbn0pXHJcblxyXG4vLyDQoSDRgdC10YDQstC10YDQsCDQtNCw0L3QvdGL0LVcclxudXNlckluZm9BcGkuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICB1c2VySWQgPSBkYXRhLl9pZDtcclxuICAgIHNldFVzZXJJbmZvKGRhdGEpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycik7IFxyXG4gIH0pO1xyXG5cclxuLy8g0YDQtdC90LTQtdGAINC60LDRgNGC0L7Rh9C10Log0YEg0YHQtdGA0LLQtdGA0LAgXHJcbmNhcmRBcGkuZ2V0SW5pdGlhbENhcmRzKClcclxuICAudGhlbihkYXRhID0+IHtcclxuICAgIGNvbnN0IGRlZmF1bHRDYXJkcyA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICB7aXRlbXM6IGRhdGEsIFxyXG4gICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgZGVmYXVsdENhcmRzLmFkZEl0ZW0oY3JlYXROZXdDYXJkKGl0ZW0pKTt9XHJcbiAgICAgIH0sIHNlY3Rpb25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgICAgZGVmYXVsdENhcmRzLnJlbmRlckl0ZW1zKCk7ICAgXHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KTtcclxuXHJcbi8v0L7QsdC90L7QstC70LXQvdC40LUg0LDQstCw0YLQsNGAXHJcbnVzZXJJbmZvQXBpLmdldFVzZXJJbmZvKClcclxuICAudGhlbihkYXRhID0+IHtcclxuICAgIHNldEF2YXRhcihkYXRhKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gIH0pOyBcclxuXHJcbmZ1bmN0aW9uIHNldEF2YXRhcihkYXRhKSB7XHJcbiAgdXNlckluZm8uc2V0QXZhdGFyKGRhdGEpO1xyXG59O1xyXG4gIFxyXG5mdW5jdGlvbiBlZGl0QXZhdGFyKGRhdGEpIHtcclxuICBhdmF0YXJBcGkuZWRpdEF2YXRhcihkYXRhKVxyXG4gIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICBzZXRBdmF0YXIoZGF0YSlcclxuICB9KVxyXG4gIC5maW5hbGx5KCgpID0+IHtcclxuICAgIHBvcHVwRWRpdEF2YXRhci5jbG9zZVBvcHVwKClcclxuICB9KVxyXG59O1xyXG5cclxuLy8g0L7RgtC60YDRi9GC0Ywg0LrQsNGA0YLQuNC90LrRg1xyXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2sobGluaywgbmFtZSkge1xyXG4gIGltYWdlV2l0aFBvcHVwLm9wZW5Qb3B1cEltYWdlKGxpbmssIG5hbWUpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZChjYXJkKSB7ICAgIFxyXG4gIGRlbGV0ZVdpdGhQb3B1cC5vcGVuUG9wdXAoKTtcclxuICBkZWxldGVXaXRoUG9wdXAuaGFuZGxlU3VibWl0KCgpID0+IHtcclxuICAgICAgY2FyZEFwaS5kZWxldGVDYXJkKGNhcmQuaWQpXHJcbiAgICAgIC50aGVuKCgpID0+e1xyXG4gICAgICAgIGNhcmQuZGVsZXRlRWxlbWVudCgpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIGRlbGV0ZVdpdGhQb3B1cC5jbG9zZVBvcHVwKClcclxuICAgICAgfSkgXHJcbiAgfSkgICAgIFxyXG59O1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGNhcmQpIHtcclxuICBpZihjYXJkLmlzTGlrZWQoKSkge1xyXG4gICAgbGlrZUFwaS5kZWxldGVDYXJkTGlrZShjYXJkLmlkKVxyXG4gICAgLnRoZW4oZGF0YUNhcmQgPT4ge2NhcmQuc2V0TGlrZXMoZGF0YUNhcmQubGlrZXMpfSlcclxuICB9IGVsc2Uge1xyXG4gICAgbGlrZUFwaS5wdXRDYXJkTGlrZShjYXJkLmlkKVxyXG4gICAgLnRoZW4oZGF0YUNhcmQgPT4ge2NhcmQuc2V0TGlrZXMoZGF0YUNhcmQubGlrZXMpfSlcclxuICB9XHJcbiAgY29uc29sZS5sb2coY2FyZClcclxufTtcclxuXHJcbi8vINGB0L7Qt9C00LDRgtGMINGN0LrQt9C10LzQv9C70Y/RgCDQutCw0YDRgtC+0YfQutC4XHJcbmZ1bmN0aW9uIGNyZWF0TmV3Q2FyZChpdGVtKSB7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGl0ZW0sIHVzZXJJZCwgY2FyZE5ld1NlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUxpa2VDbGljaywgaGFuZGxlRGVsZXRlQ2FyZCk7XHJcbiAgcmV0dXJuIG5ld0NhcmQuZ2VuZXJhdGVDYXJkKClcclxufTtcclxuXHJcbmZ1bmN0aW9uIHNldFVzZXJJbmZvIChkYXRhKXtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGVkaXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgdXNlckluZm9BcGkuZWRpdFVzZXJJbmZvKGRhdGEpXHJcbiAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICBzZXRVc2VySW5mbyhkYXRhKTtcclxuICB9KVxyXG4gIC5maW5hbGx5KCgpID0+IHtcclxuICAgIHBvcHVwRWRpdEZvcm0uY2xvc2VQb3B1cCgpO1xyXG4gIH0pXHJcbn07XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVGb3JtVmFsdWUgKCkge1xyXG4gIHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBzZXRJbnB1dFZhbHVlICgpIHtcclxuICBuYW1lUG9wdXAudmFsdWUgPSB1c2VySW5mby5nZXRVc2VySW5mbygpLm5hbWU7XHJcbiAgam9iUG9wdXAudmFsdWUgPSB1c2VySW5mby5nZXRVc2VySW5mbygpLmpvYjtcclxufTtcclxuXHJcbmZ1bmN0aW9uIHNhdmVOZXdDYXJkKGRhdGEpIHtcclxuICBjYXJkQXBpLmFkZENhcmQoZGF0YSlcclxuICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICBlbGVtZW50c1NlY3Rpb24ucHJlcGVuZChjcmVhdE5ld0NhcmQoZGF0YSkpXHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwb3B1cEFkZEZvcm0uY2xvc2VQb3B1cCgpXHJcbiAgICB9KVxyXG4gIH07XHJcblxyXG5lZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwRWRpdEZvcm0uYmFja1RleHRCdXR0b25TYXZlKCk7XHJcbiAgc2V0SW5wdXRWYWx1ZSh1cGRhdGVGb3JtVmFsdWUoKSk7XHJcbiAgcG9wdXBFZGl0Rm9ybS5vcGVuUG9wdXAoKTtcclxuICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldEVycm9yVmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbmFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+e1xyXG4gIHBvcHVwQWRkRm9ybS5iYWNrVGV4dEJ1dHRvbkNyZWF0KCk7XHJcbiAgcG9wdXBBZGRGb3JtLm9wZW5Qb3B1cCgpO1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IudG9vZ2xlQnV0dG9uU3RhdGUoKTtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0RXJyb3JWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuZWRpdEJ0bkF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBwb3B1cEVkaXRBdmF0YXIuYmFja1RleHRCdXR0b25TYXZlKCk7XHJcbiAgcG9wdXBFZGl0QXZhdGFyLm9wZW5Qb3B1cCgpO1xyXG4gIGF2YXRhckZvcm1WYWxpZGF0b3IucmVzZXRFcnJvclZhbGlkYXRpb24oKTtcclxufSk7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCl7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgICBcclxuICAgIH0pXHJcbiAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCwge1xyXG4gICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KVxyXG4gICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBlZGl0VXNlckluZm8oZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxyXG4gICAgfSlcclxuICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgYWRkQ2FyZChkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCwge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgIH0pXHJcbiAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1dENhcmRMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9LyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZWRpdEF2YXRhcihkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgIH0pXHJcbiAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxufTsiLCJleHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc2F2ZScsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19zYXZlX2luYWN0aXZlJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0Jyk7XHJcbmV4cG9ydCBjb25zdCBhZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkJyk7XHJcbmV4cG9ydCBjb25zdCBlZGl0QnRuQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcl9lZGl0Jyk7XHJcblxyXG5leHBvcnQgY29uc3QgbmFtZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX25hbWUnKTtcclxuZXhwb3J0IGNvbnN0IGpvYlBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2luZm8nKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZWRpdCcpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfYWRkJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9lZGl0LWF2YXRhcicpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRzU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50cycpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGltYWdlUG9wdXBTZWxlY3RvciA9ICcucG9wdXBfb3Blbic7XHJcbmV4cG9ydCBjb25zdCBjYXJkTmV3U2VsZWN0b3IgPSAnLmVsZW1lbnRfX3RlbXBsYXRlJztcclxuZXhwb3J0IGNvbnN0IHNlY3Rpb25TZWxlY3RvciA9ICcuZWxlbWVudHMnO1xyXG5leHBvcnQgY29uc3QgbmFtZVByb2ZpbGVTZWxlY3RvciA9ICcucHJvZmlsZV9fdGl0bGUnO1xyXG5leHBvcnQgY29uc3Qgam9iUHJvZmlsZVNlbGVjdG9yID0gJy5wcm9maWxlX190ZXh0JztcclxuZXhwb3J0IGNvbnN0IGF2YXRhclByb2ZpbGVTZWxlY3RvciA9ICcucHJvZmlsZV9fYXZhdGFyJztcclxuZXhwb3J0IGNvbnN0IGVkaXRGb3JtU2VsZWN0b3IgPSAnLnBvcHVwX2VkaXQnO1xyXG5leHBvcnQgY29uc3QgYWRkRm9ybVNlbGVjdG9yID0gJy5wb3B1cF9hZGQnO1xyXG5leHBvcnQgY29uc3QgZWRpdEF2YXRhclNlbGVjdG9yID0gJy5wb3B1cF9lZGl0LWF2YXRhcic7XHJcbmV4cG9ydCBjb25zdCBlbGVtZW50RGVsZXRlID0gJy5wb3B1cF9kZWxldGUnOyJdLCJuYW1lcyI6WyJDYXJkIiwiZGF0YSIsInVzZXJJZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUxpa2VDbGljayIsImhhbmRsZURlbGV0ZUNhcmQiLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2xpa2VzIiwibGlrZXMiLCJfb3duZXIiLCJvd25lciIsIl9pZCIsImlkIiwiX3VzZXJJZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVEZWxldGVDYXJkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9nZXRUZW1wbGF0ZSIsIl9zZXRFdmVudExpc3RuZXJzIiwiaGFuZGxlRGVsZXRlQnV0dG9uIiwidXBkYXRlTGlrZUJ1dHRvbiIsImVsZW1lbnRJbWFnZSIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwibGVuZ3RoIiwiY2hlY2tDYXJkT3duZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJzb21lIiwiaXNMaWtlZCIsInRvZ2dsZSIsImRhdGFDYXJkIiwiX3VwZGF0ZUxpa2VOdW1iZXIiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2luaXRpYWxBcnJheSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsImZvckVhY2giLCJpdGVtIiwiRm9ybVZhbGlkYXRvciIsInZhbGlkYXRpb25Db25maWciLCJlbGVtZW50Rm9ybSIsIl92YWxpZGF0aW9uQ29uZmlnIiwiX2VsZW1lbnRGb3JtIiwiX3N1Ym1pdEJ1dHRvbiIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzZXRBdHRyaWJ1dGUiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwicmVtb3ZlQXR0cmlidXRlIiwidG9vZ2xlQnV0dG9uU3RhdGUiLCJfaXNWYWxpZCIsIl9zZXRFdmVudExpc3RlbmVyIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZ0Iiwia2V5IiwiY2xvc2VQb3B1cCIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3JtRnVuY3Rpb24iLCJfc3VibWl0Rm9ybUZ1bmN0aW9uIiwiX2Zvcm0iLCJpbnB1dExpc3QiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZVBvcHVwUGljdHVyZSIsIl9zdWJ0aXRsZVBvcHVwIiwiUG9wdXBXaXRoRGVsZXRlIiwiaGFuZGxlciIsIl9zdWJtaXRIYW5kbGVyIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX2pvYiIsIl9hdmF0YXIiLCJqb2IiLCJpbmZvIiwiYWJvdXQiLCJhdmF0YXIiLCJBcGkiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElkIiwiZm9ybVNlbGVjdG9yIiwiZWRpdEJ0biIsImFkZEJ0biIsImVkaXRCdG5BdmF0YXIiLCJuYW1lUG9wdXAiLCJqb2JQb3B1cCIsInBvcHVwRWRpdCIsInBvcHVwQWRkIiwicG9wdXBBdmF0YXIiLCJlbGVtZW50c1NlY3Rpb24iLCJ1c2VySW5mbyIsImVkaXRGb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsImFkZEZvcm1WYWxpZGF0b3IiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwiaW1hZ2VXaXRoUG9wdXAiLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwRWRpdEZvcm0iLCJ1c2VySW5mb0FwaSIsImVkaXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiZmluYWxseSIsInBvcHVwQWRkRm9ybSIsImNhcmRBcGkiLCJhZGRDYXJkIiwiY3JlYXROZXdDYXJkIiwicG9wdXBFZGl0QXZhdGFyIiwiYXZhdGFyQXBpIiwiZWRpdEF2YXRhciIsInNldEF2YXRhciIsImRlbGV0ZVdpdGhQb3B1cCIsImF1dGhvcml6YXRpb24iLCJsaWtlQXBpIiwib3BlblBvcHVwSW1hZ2UiLCJjYXJkIiwib3BlblBvcHVwIiwiaGFuZGxlU3VibWl0IiwiZGVsZXRlQ2FyZCIsImRlbGV0ZUVsZW1lbnQiLCJkZWxldGVDYXJkTGlrZSIsInNldExpa2VzIiwicHV0Q2FyZExpa2UiLCJjb25zb2xlIiwibG9nIiwiZ2VuZXJhdGVDYXJkIiwiZ2V0VXNlckluZm8iLCJjYXRjaCIsImVyciIsImdldEluaXRpYWxDYXJkcyIsImRlZmF1bHRDYXJkcyIsImFkZEl0ZW0iLCJyZW5kZXJJdGVtcyIsImJhY2tUZXh0QnV0dG9uU2F2ZSIsInJlc2V0RXJyb3JWYWxpZGF0aW9uIiwiYmFja1RleHRCdXR0b25DcmVhdCJdLCJzb3VyY2VSb290IjoiIn0=