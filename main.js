(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._cardSelector=n,this._handleCardClick=r}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"_addlike",value:function(e){e.target.classList.toggle("element__heart_active")}},{key:"_deleteElement",value:function(){this._element.remove(),this._element=null}},{key:"_setEventListners",value:function(){var e=this;this._element.querySelector(".element__heart").addEventListener("click",(function(t){return e._addlike(t)})),this._element.querySelector(".element__delete").addEventListener("click",(function(){return e._deleteElement()})),this._element.querySelector(".element__image").addEventListener("click",(function(){return e._handleCardClick(e._link,e._name)}))}},{key:"generateCard",value:function(){this._element=this._getTemplate(),this._setEventListners();var e=this._element.querySelector(".element__image");return this._element.querySelector(".element__title").textContent=this._name,e.src=this._link,e.alt=this._name,this._element}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialArray=r,this._renderer=o,this._container=document.querySelector(n)}var t,r;return t=e,(r=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._initialArray.forEach((function(t){e._renderer(t)}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._validationConfig=t,this._elementForm=n,this._submitButton=this._elementForm.querySelector(this._validationConfig.submitButtonSelector),this._inputList=Array.from(this._elementForm.querySelectorAll(this._validationConfig.inputSelector))}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._elementForm.querySelector(".".concat(e.id,"-error"));e.classList.add(this._validationConfig.inputErrorClass),n.textContent=t,n.classList.add(this._validationConfig.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._elementForm.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._validationConfig.inputErrorClass),t.classList.remove(this._validationConfig.errorClass),t.textContent=""}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"toogleButtonState",value:function(){this._hasInvalidInput()?(this._submitButton.setAttribute("disabled",!0),this._submitButton.classList.add(this._validationConfig.inactiveButtonClass)):(this._submitButton.removeAttribute("disabled"),this._submitButton.classList.remove(this._validationConfig.inactiveButtonClass))}},{key:"_setEventListener",value:function(){var e=this;this.toogleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e.toogleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListener()}},{key:"resetErrorValidation",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.closePopup()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"openPopup",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"closePopup",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close"))&&e.closePopup()}))}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=p(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},s.apply(this,arguments)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function y(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._submitFormFunction=t,n._form=n._popup.querySelector(".popup__form"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this._form.querySelectorAll(".popup__input"),t={};return e.forEach((function(e){return t[e.name]=e.value})),t}},{key:"setEventListeners",value:function(){var e=this;s(d(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submitFormFunction(e._getInputValues()),e.closePopup()}))}},{key:"closePopup",value:function(){this._form.reset(),s(d(u.prototype),"closePopup",this).call(this)}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(a);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function m(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=w(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(n);if(r){var o=k(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return m(this,e)});function i(e){var t,n,r,u,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a=function(e,r){n._imagePopupPicture=n._popup.querySelector(".popup__image"),n._subtitlePopup=n._popup.querySelector(".popup__subtitle"),n._imagePopupPicture.src=e,n._imagePopupPicture.alt=r,n._subtitlePopup.textContent=r,g((t=b(n),k(i.prototype)),"openPopup",t).call(t)},(u="openPopupImage")in(r=b(n=o.call(this,e)))?Object.defineProperty(r,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[u]=a,n}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(a);function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(t),this._job=document.querySelector(n)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,job:this._job.textContent}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._job.textContent=e.job}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),j={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},O=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],C=document.querySelector(".profile__edit"),L=document.querySelector(".profile__add"),q=document.querySelector(".popup__input_type_name"),I=document.querySelector(".popup__input_type_info"),x=document.querySelector(".popup_edit"),B=document.querySelector(".popup_add"),R=document.querySelector(".elements"),T=new S(".profile__title",".profile__text"),V=new i(j,x);V.enableValidation();var F=new i(j,B);F.enableValidation();var A=new E(".popup_open");function D(e,t){A.openPopupImage(e,t)}function U(e){return new t(e,".element__template",D).generateCard()}A.setEventListeners();var z=new r({items:O,renderer:function(e){z.addItem(U(e))}},".elements");z.renderItems();var M=new _(".popup_edit",(function(e){!function(e){T.setUserInfo(e)}(e)}));C.addEventListener("click",(function(){q.value=T.getUserInfo().name,I.value=T.getUserInfo().job,M.openPopup(),V.resetErrorValidation()})),M.setEventListeners();var N=new _(".popup_add",(function(e){R.prepend(U(e))}));L.addEventListener("click",(function(){N.openPopup(),F.toogleButtonState(),F.resetErrorValidation()})),N.setEventListeners(),console.log(O)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiNkxBQXFCQSxFQUFBQSxXQUNuQixXQUFZQyxFQUFNQyxFQUFjQyxJLDRGQUFpQixTQUMvQ0MsS0FBS0MsTUFBUUosRUFBS0ssS0FDbEJGLEtBQUtHLE1BQVFOLEVBQUtPLEtBQ2xCSixLQUFLSyxjQUFnQlAsRUFDckJFLEtBQUtNLGlCQUFtQlAsRSxpREFHMUIsV0FPRSxPQU5vQlEsU0FDakJDLGNBQWNSLEtBQUtLLGVBQ25CSSxRQUNBRCxjQUFjLFlBQ2RFLFdBQVUsSyxzQkFLZixTQUFTQyxHQUNpQkEsRUFBSUMsT0FDWkMsVUFBVUMsT0FBTywyQiw0QkFHbkMsV0FDRWQsS0FBS2UsU0FBU0MsU0FDZGhCLEtBQUtlLFNBQVcsTywrQkFHbEIsV0FBb0IsV0FDbEJmLEtBQUtlLFNBQVNQLGNBQWMsbUJBQW1CUyxpQkFBaUIsU0FBUyxTQUFDTixHQUFELE9BQVMsRUFBS08sU0FBU1AsTUFDaEdYLEtBQUtlLFNBQVNQLGNBQWMsb0JBQW9CUyxpQkFBaUIsU0FBUyxrQkFBTSxFQUFLRSxvQkFDckZuQixLQUFLZSxTQUFTUCxjQUFjLG1CQUFtQlMsaUJBQWlCLFNBQVMsa0JBQU0sRUFBS1gsaUJBQWlCLEVBQUtILE1BQU8sRUFBS0YsWSwwQkFHeEgsV0FDRUQsS0FBS2UsU0FBV2YsS0FBS29CLGVBQ3JCcEIsS0FBS3FCLG9CQUVMLElBQU1DLEVBQWV0QixLQUFLZSxTQUFTUCxjQUFjLG1CQUtqRCxPQUpBUixLQUFLZSxTQUFTUCxjQUFjLG1CQUFtQmUsWUFBY3ZCLEtBQUtDLE1BQ2xFcUIsRUFBYUUsSUFBTXhCLEtBQUtHLE1BQ3hCbUIsRUFBYUcsSUFBTXpCLEtBQUtDLE1BRWpCRCxLQUFLZSxjLHNFQTNDS25CLEcsMEtDQUE4QixFQUFBQSxXQUNuQixhQUErQkMsR0FBbUIsSUFBckNDLEVBQXFDLEVBQXJDQSxNQUFPQyxFQUE4QixFQUE5QkEsVSw0RkFBOEIsU0FDOUM3QixLQUFLOEIsY0FBZ0JGLEVBQ3JCNUIsS0FBSytCLFVBQVlGLEVBRWpCN0IsS0FBS2dDLFdBQWF6QixTQUFTQyxjQUFjbUIsRyw0Q0FHN0MsU0FBUU0sR0FDTmpDLEtBQUtnQyxXQUFXRSxRQUFRRCxLLHlCQUcxQixXQUFjLFdBQ1pqQyxLQUFLOEIsY0FBY0ssU0FBUSxTQUFDQyxHQUMxQixFQUFLTCxVQUFVSyxXLHNFQWRBVixHLDBLQ0FBVyxFQUFBQSxXQUNuQixXQUFZQyxFQUFrQkMsSSw0RkFBYSxTQUN6Q3ZDLEtBQUt3QyxrQkFBb0JGLEVBQ3pCdEMsS0FBS3lDLGFBQWVGLEVBQ3BCdkMsS0FBSzBDLGNBQWdCMUMsS0FBS3lDLGFBQWFqQyxjQUFjUixLQUFLd0Msa0JBQWtCRyxzQkFDNUUzQyxLQUFLNEMsV0FBY0MsTUFBTUMsS0FBSzlDLEtBQUt5QyxhQUFhTSxpQkFBaUIvQyxLQUFLd0Msa0JBQWtCUSxnQixvREFHMUYsU0FBZ0JDLEVBQWFDLEdBQzNCLElBQU1DLEVBQWVuRCxLQUFLeUMsYUFBYWpDLGNBQWxCLFdBQW9DeUMsRUFBYUcsR0FBakQsV0FDckJILEVBQWFwQyxVQUFVd0MsSUFBSXJELEtBQUt3QyxrQkFBa0JjLGlCQUNsREgsRUFBYTVCLFlBQWMyQixFQUMzQkMsRUFBYXRDLFVBQVV3QyxJQUFJckQsS0FBS3dDLGtCQUFrQmUsYyw2QkFHcEQsU0FBZ0JOLEdBQ2QsSUFBTUUsRUFBZW5ELEtBQUt5QyxhQUFhakMsY0FBbEIsV0FBb0N5QyxFQUFhRyxHQUFqRCxXQUNyQkgsRUFBYXBDLFVBQVVHLE9BQU9oQixLQUFLd0Msa0JBQWtCYyxpQkFDckRILEVBQWF0QyxVQUFVRyxPQUFPaEIsS0FBS3dDLGtCQUFrQmUsWUFDckRKLEVBQWE1QixZQUFjLEssc0JBRzdCLFNBQVMwQixHQUNGQSxFQUFhTyxTQUFTQyxNQUd6QnpELEtBQUswRCxnQkFBZ0JULEdBRnJCakQsS0FBSzJELGdCQUFnQlYsRUFBY0EsRUFBYVcscUIsOEJBTXBELFdBQ0UsT0FBTzVELEtBQUs0QyxXQUFXaUIsTUFBSyxTQUFDWixHQUMzQixPQUFRQSxFQUFhTyxTQUFTQyxXLCtCQUlsQyxXQUNNekQsS0FBSzhELG9CQUNQOUQsS0FBSzBDLGNBQWNxQixhQUFhLFlBQVksR0FDNUMvRCxLQUFLMEMsY0FBYzdCLFVBQVV3QyxJQUFJckQsS0FBS3dDLGtCQUFrQndCLHVCQUV4RGhFLEtBQUswQyxjQUFjdUIsZ0JBQWdCLFlBQ25DakUsS0FBSzBDLGNBQWM3QixVQUFVRyxPQUFPaEIsS0FBS3dDLGtCQUFrQndCLHdCLCtCQUkvRCxXQUFvQixXQUNsQmhFLEtBQUtrRSxvQkFDTGxFLEtBQUs0QyxXQUFXVCxTQUFRLFNBQUNjLEdBQ3ZCQSxFQUFhaEMsaUJBQWlCLFNBQVMsV0FDckMsRUFBS2tELFNBQVNsQixHQUNkLEVBQUtpQiw0Qiw4QkFLWCxXQUNFbEUsS0FBS29FLHNCLGtDQUdQLFdBQXVCLFdBQ3JCcEUsS0FBSzRDLFdBQVdULFNBQVEsU0FBQ2MsR0FDekIsRUFBS1MsZ0JBQWdCVCxXLHNFQTlESlosRywwS0NBQWdDLEVBQUFBLFdBQ25CLFdBQVlDLEdBQWUsSSxJQUFBLFEsNEZBQUEsUyxFQWNULFNBQUMzRCxHQUNELFdBQVpBLEVBQUk0RCxLQUNOLEVBQUtDLGUsRUFoQmtCLDBCLHNCQUFBLEssdURBQUEsSyxLQUN6QnhFLEtBQUt5RSxPQUFTbEUsU0FBU0MsY0FBYzhELEcsOENBR3ZDLFdBQ0V0RSxLQUFLeUUsT0FBTzVELFVBQVV3QyxJQUFJLGdCQUMxQjlDLFNBQVNVLGlCQUFpQixVQUFXakIsS0FBSzBFLG1CLHdCQUc1QyxXQUNFMUUsS0FBS3lFLE9BQU81RCxVQUFVRyxPQUFPLGdCQUM3QlQsU0FBU29FLG9CQUFvQixVQUFXM0UsS0FBSzBFLG1CLCtCQVMvQyxXQUFvQixXQUNsQjFFLEtBQUt5RSxPQUFPeEQsaUJBQWlCLFNBQVMsU0FBQ04sSUFDakNBLEVBQUlDLE9BQU9DLFVBQVUrRCxTQUFTLGlCQUFtQmpFLEVBQUlDLE9BQU9DLFVBQVUrRCxTQUFTLGtCQUNqRixFQUFLSixxQixzRUF4QlFILEcsK3RDQ0VBUSxFQUFBQSxTQUFBQSxJLDZyQkFDbkIsV0FBWVAsRUFBZVEsR0FBb0IsYSw0RkFBQSxVQUM3QyxjQUFNUixJQUNEUyxvQkFBc0JELEVBQzNCLEVBQUtFLE1BQVEsRUFBS1AsT0FBT2pFLGNBQWMsZ0JBSE0sRSw0Q0FNL0MsV0FDRSxJQUFNeUUsRUFBWWpGLEtBQUtnRixNQUFNakMsaUJBQWlCLGlCQUV4Q21DLEVBQWEsR0FHbkIsT0FGRUQsRUFBVTlDLFNBQVEsU0FBQWdELEdBQUssT0FBSUQsRUFBV0MsRUFBTWpGLE1BQVFpRixFQUFNQyxTQUVyREYsSSwrQkFHVCxXQUFvQixXQUNsQixzREFFQWxGLEtBQUtnRixNQUFNL0QsaUJBQWlCLFVBQVUsU0FBQ04sR0FDckNBLEVBQUkwRSxpQkFDSixFQUFLTixvQkFBb0IsRUFBS08sbUJBQzlCLEVBQUtkLGtCLHdCQUlULFdBQ0V4RSxLQUFLZ0YsTUFBTU8sUUFDWCxvRCxzRUE1QmlCVixDQUFzQlIsRyw0akNDQXRCbUIsRUFBQUEsU0FBQUEsSSwyckJBQ25CLFdBQVlsQixHQUFlLFEsTUFBQSxPLDRGQUFBLFMsRUFJVixTQUFDbEUsRUFBS0YsR0FDckIsRUFBS3VGLG1CQUFxQixFQUFLaEIsT0FBT2pFLGNBQWMsaUJBQ3BELEVBQUtrRixlQUFpQixFQUFLakIsT0FBT2pFLGNBQWMsb0JBRWhELEVBQUtpRixtQkFBbUJqRSxJQUFNcEIsRUFDOUIsRUFBS3FGLG1CQUFtQmhFLElBQU12QixFQUM5QixFQUFLd0YsZUFBZW5FLFlBQWNyQixFQUVsQyxtRCxFQVp5QixvQixFQUFBLEVBQ3pCLGNBQU1vRSxLLHNGQURtQixFLGdFQURSa0IsQ0FBdUJuQixHLDBLQ0Z2QnNCLEVBQUFBLFdBQ25CLFdBQVlDLEVBQWNDLEksNEZBQWEsU0FDckM3RixLQUFLQyxNQUFRTSxTQUFTQyxjQUFjb0YsR0FDcEM1RixLQUFLOEYsS0FBT3ZGLFNBQVNDLGNBQWNxRixHLGdEQUdyQyxXQU1FLE1BTGlCLENBQ2YzRixLQUFNRixLQUFLQyxNQUFNc0IsWUFDakJ3RSxJQUFLL0YsS0FBSzhGLEtBQUt2RSxlLHlCQU1uQixTQUFZeUUsR0FDVmhHLEtBQUtDLE1BQU1zQixZQUFjeUUsRUFBSzlGLEtBQzlCRixLQUFLOEYsS0FBS3ZFLFlBQWN5RSxFQUFLRCxTLHNFQWpCWkosR0NBUnJELEVBQW1CLENBQzlCMkQsYUFBYyxlQUNkakQsY0FBZSxnQkFDZkwscUJBQXNCLGVBQ3RCcUIsb0JBQXFCLHVCQUNyQlYsZ0JBQWlCLDBCQUNqQkMsV0FBWSw2QkFHRDJDLEVBQWUsQ0FDeEIsQ0FDRWhHLEtBQU0sUUFDTkUsS0FBTSxpRkFFUixDQUNFRixLQUFNLHNCQUNORSxLQUFNLDZGQUVSLENBQ0VGLEtBQU0sVUFDTkUsS0FBTSxrRkFFUixDQUNFRixLQUFNLFdBQ05FLEtBQU0sb0ZBRVIsQ0FDRUYsS0FBTSxxQkFDTkUsS0FBTSw2RkFFUixDQUNFRixLQUFNLFNBQ05FLEtBQU0sa0ZBSUMrRixFQUFVNUYsU0FBU0MsY0FBYyxrQkFDakM0RixFQUFTN0YsU0FBU0MsY0FBYyxpQkFFaEM2RixFQUFZOUYsU0FBU0MsY0FBYywyQkFDbkM4RixFQUFXL0YsU0FBU0MsY0FBYywyQkFFbEMrRixFQUFZaEcsU0FBU0MsY0FBYyxlQUNuQ2dHLEVBQVdqRyxTQUFTQyxjQUFjLGNBRWxDaUcsRUFBa0JsRyxTQUFTQyxjQUFjLGFDdEJoRGtHLEVBQVcsSUFBSWYsRUQyQmMsa0JBQ0Qsa0JDMUI1QmdCLEVBQW9CLElBQUl0RSxFQUFjQyxFQUFrQmlFLEdBQzlESSxFQUFrQkMsbUJBRWxCLElBQU1DLEVBQW1CLElBQUl4RSxFQUFjQyxFQUFrQmtFLEdBQzdESyxFQUFpQkQsbUJBRWpCLElBQU1FLEVBQWlCLElBQUl0QixFRGdCTyxlQ1psQyxTQUFTekYsRUFBZ0JLLEVBQU1GLEdBQzdCNEcsRUFBZUMsZUFBZTNHLEVBQU1GLEdBSXRDLFNBQVM4RyxFQUFhNUUsR0FFcEIsT0FEZ0IsSUFBSXhDLEVBQUt3QyxFRE9JLHFCQ1BtQnJDLEdBQ2pDa0gsZUFWakJILEVBQWVJLG9CQWNmLElBQU1DLEVBQWUsSUFBSXpGLEVBQ3ZCLENBQUNFLE1BQU9zRSxFQUNQckUsU0FBVSxTQUFDTyxHQUNUK0UsRUFBYUMsUUFBUUosRUFBYTVFLE1EQVIsYUNLL0IrRSxFQUFhRSxjQVliLElBQU1DLEVBQWdCLElBQUl6QyxFRGRNLGVDYzBCLFNBQUNoRixJQUozRCxTQUFxQkEsR0FDbkI2RyxFQUFTYSxZQUFZMUgsR0FJckIwSCxDQUFZMUgsTUFHZHNHLEVBQVFsRixpQkFBaUIsU0FBUyxXQVpoQ29GLEVBQVVqQixNQUFRc0IsRUFBU2MsY0FBY3RILEtBQ3pDb0csRUFBU2xCLE1BQVFzQixFQUFTYyxjQUFjekIsSUFheEN1QixFQUFjRyxZQUNkZCxFQUFrQmUsMEJBR3BCSixFQUFjSixvQkFFZCxJQUFNUyxFQUFlLElBQUk5QyxFRHpCTSxjQ3lCeUIsU0FBQ2hGLEdBQ3JENEcsRUFBZ0J2RSxRQUFROEUsRUFBYW5ILE9BR3pDdUcsRUFBT25GLGlCQUFpQixTQUFTLFdBQy9CMEcsRUFBYUYsWUFDYlosRUFBaUIzQyxvQkFDakIyQyxFQUFpQmEsMEJBR25CQyxFQUFhVCxvQkFDYlUsUUFBUUMsSUFBSTNCLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9O1xyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JylcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfYWRkbGlrZShldnQpIHtcclxuICAgIGNvbnN0IGV2ZW50VGFyZ2V0TGlrZSA9IGV2dC50YXJnZXQ7XHJcbiAgICBldmVudFRhcmdldExpa2UuY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9faGVhcnRfYWN0aXZlJyk7XHJcbiAgfVxyXG5cclxuICBfZGVsZXRlRWxlbWVudCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9O1xyXG5cclxuICBfc2V0RXZlbnRMaXN0bmVycygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19oZWFydFwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHRoaXMuX2FkZGxpa2UoZXZ0KSk7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZGVsZXRlXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5fZGVsZXRlRWxlbWVudCgpKTtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKSk7XHJcbiAgfVxyXG4gIFxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0bmVycygpO1xyXG5cclxuICAgIGNvbnN0IGVsZW1lbnRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgZWxlbWVudEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICBlbGVtZW50SW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7aXRlbXMsIHJlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgICAgdGhpcy5faW5pdGlhbEFycmF5ID0gaXRlbXM7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcblxyXG4gICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2luaXRpYWxBcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pOyBcclxuICAgIH0pOyBcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uQ29uZmlnLCBlbGVtZW50Rm9ybSkge1xyXG4gICAgdGhpcy5fdmFsaWRhdGlvbkNvbmZpZyA9IHZhbGlkYXRpb25Db25maWc7XHJcbiAgICB0aGlzLl9lbGVtZW50Rm9ybSA9IGVsZW1lbnRGb3JtO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZWxlbWVudEZvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl92YWxpZGF0aW9uQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9ICBBcnJheS5mcm9tKHRoaXMuX2VsZW1lbnRGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZWxlbWVudEZvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5lcnJvckNsYXNzKTsgICBcclxuICB9XHJcbiAgXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZWxlbWVudEZvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gIH07XHJcblxyXG4gIF9pc1ZhbGlkKGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICB0b29nbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7IFxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVyKCkge1xyXG4gICAgdGhpcy50b29nbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faXNWYWxpZChpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudG9vZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG4gIFxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKCk7XHJcbiAgfTtcclxuXHJcbiAgcmVzZXRFcnJvclZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpXHJcbiAgICB9KTtcclxuICB9XHJcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW5Qb3B1cCgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlUG9wdXAoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlJykpIHsgXHJcbiAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7IFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzdWJtaXRGb3JtRnVuY3Rpb24pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0Rm9ybUZ1bmN0aW9uID0gc3VibWl0Rm9ybUZ1bmN0aW9uO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0Jyk7XHJcbiAgICBcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuICAgICAgaW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4gZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRGb3JtRnVuY3Rpb24odGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIGNsb3NlUG9wdXAoKSB7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZVBvcHVwKCk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcbiAgXHJcbiAgb3BlblBvcHVwSW1hZ2UgPSAobGluayxuYW1lKSA9PiB7XHJcbiAgICB0aGlzLl9pbWFnZVBvcHVwUGljdHVyZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuICAgIHRoaXMuX3N1YnRpdGxlUG9wdXAgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3N1YnRpdGxlJyk7XHJcblxyXG4gICAgdGhpcy5faW1hZ2VQb3B1cFBpY3R1cmUuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2ltYWdlUG9wdXBQaWN0dXJlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9zdWJ0aXRsZVBvcHVwLnRleHRDb250ZW50ID0gbmFtZTtcclxuXHJcbiAgICBzdXBlci5vcGVuUG9wdXAoKTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBqb2JTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VySW5mbyA9IHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9qb2IudGV4dENvbnRlbnRcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHVzZXJJbmZvO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oaW5mbykge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGluZm8ubmFtZTtcclxuICAgIHRoaXMuX2pvYi50ZXh0Q29udGVudCA9IGluZm8uam9iO1xyXG4gIH1cclxufSIsImV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zYXZlJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX3NhdmVfaW5hY3RpdmUnLFxyXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcclxuICBlcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZSdcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6ICfQkNGA0YXRi9C3JyxcclxuICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxyXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiAn0JjQstCw0L3QvtCy0L4nLFxyXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxyXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxyXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiAn0JHQsNC50LrQsNC7JyxcclxuICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJ1xyXG4gICAgfVxyXG4gIF07XHJcblxyXG5leHBvcnQgY29uc3QgZWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0Jyk7XHJcbmV4cG9ydCBjb25zdCBhZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkJyk7XHJcblxyXG5leHBvcnQgY29uc3QgbmFtZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX25hbWUnKTtcclxuZXhwb3J0IGNvbnN0IGpvYlBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2luZm8nKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZWRpdCcpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfYWRkJyk7XHJcblxyXG5leHBvcnQgY29uc3QgZWxlbWVudHNTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzJyk7XHJcblxyXG5leHBvcnQgY29uc3QgaW1hZ2VQb3B1cFNlbGVjdG9yID0gJy5wb3B1cF9vcGVuJztcclxuZXhwb3J0IGNvbnN0IGNhcmROZXdTZWxlY3RvciA9ICcuZWxlbWVudF9fdGVtcGxhdGUnO1xyXG5leHBvcnQgY29uc3Qgc2VjdGlvblNlbGVjdG9yID0gJy5lbGVtZW50cyc7XHJcbmV4cG9ydCBjb25zdCBuYW1lUHJvZmlsZVNlbGVjdG9yID0gJy5wcm9maWxlX190aXRsZSc7XHJcbmV4cG9ydCBjb25zdCBqb2JQcm9maWxlU2VsZWN0b3IgPSAnLnByb2ZpbGVfX3RleHQnO1xyXG5leHBvcnQgY29uc3QgZWRpdEZvcm1TZWxlY3RvciA9ICcucG9wdXBfZWRpdCc7XHJcbmV4cG9ydCBjb25zdCBhZGRGb3JtU2VsZWN0b3IgPSAnLnBvcHVwX2FkZCc7XHJcbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IHtpbml0aWFsQ2FyZHMsXHJcbiAgICAgICAgdmFsaWRhdGlvbkNvbmZpZyxcclxuICAgICAgICBlZGl0QnRuLCBwb3B1cEVkaXQsXHJcbiAgICAgICAgbmFtZVBvcHVwLFxyXG4gICAgICAgIGpvYlBvcHVwLFxyXG4gICAgICAgIHBvcHVwQWRkLFxyXG4gICAgICAgIGFkZEJ0biwgXHJcbiAgICAgICAgZWxlbWVudHNTZWN0aW9uLFxyXG4gICAgICAgIGltYWdlUG9wdXBTZWxlY3RvcixcclxuICAgICAgICBjYXJkTmV3U2VsZWN0b3IsXHJcbiAgICAgICAgc2VjdGlvblNlbGVjdG9yLFxyXG4gICAgICAgIG5hbWVQcm9maWxlU2VsZWN0b3IsXHJcbiAgICAgICAgam9iUHJvZmlsZVNlbGVjdG9yLFxyXG4gICAgICAgIGVkaXRGb3JtU2VsZWN0b3IsXHJcbiAgICAgICAgYWRkRm9ybVNlbGVjdG9yfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnXHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhuYW1lUHJvZmlsZVNlbGVjdG9yLCBqb2JQcm9maWxlU2VsZWN0b3IpO1xyXG4vL9Cy0LDQu9C40LTQsNGG0LjRjyDRhNC+0YDQvFxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwRWRpdCk7XHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwb3B1cEFkZCk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgaW1hZ2VXaXRoUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoaW1hZ2VQb3B1cFNlbGVjdG9yKTtcclxuaW1hZ2VXaXRoUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vINC+0YLQutGA0YvRgtGMINC60LDRgNGC0LjQvdC60YNcclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKGxpbmssIG5hbWUpIHtcclxuICBpbWFnZVdpdGhQb3B1cC5vcGVuUG9wdXBJbWFnZShsaW5rLCBuYW1lKTtcclxufVxyXG5cclxuLy8g0YHQvtC30LTQsNGC0Ywg0Y3QutC30LXQvNC/0LvRj9GAINC60LDRgNGC0L7Rh9C60LhcclxuZnVuY3Rpb24gY3JlYXROZXdDYXJkKGl0ZW0pIHtcclxuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoaXRlbSwgY2FyZE5ld1NlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spO1xyXG4gIHJldHVybiBuZXdDYXJkLmdlbmVyYXRlQ2FyZCgpXHJcbn1cclxuXHJcbi8vINGB0L7Qt9C00LDRgtGMINC4INCy0YHRgtCw0LLQuNGC0Ywg0LjRgdGF0L7QtNC90YvQuSDQvNCw0YHRgdC40LJcclxuY29uc3QgZGVmYXVsdENhcmRzID0gbmV3IFNlY3Rpb24oXHJcbiAge2l0ZW1zOiBpbml0aWFsQ2FyZHMsIFxyXG4gICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICBkZWZhdWx0Q2FyZHMuYWRkSXRlbShjcmVhdE5ld0NhcmQoaXRlbSkpO31cclxuICAgfSxcclxuICAgc2VjdGlvblNlbGVjdG9yXHJcbik7XHJcblxyXG5kZWZhdWx0Q2FyZHMucmVuZGVySXRlbXMoKTtcclxuXHJcbi8vINC/0L7QtNGB0YLQsNCy0LjRgtGMINCyINGE0L7RgNC80YMg0L/RgNC4INC+0YLQutGA0YvRgtC40LjQuFxyXG5mdW5jdGlvbiBzZXRJbnB1dFZhbHVlICgpe1xyXG4gIG5hbWVQb3B1cC52YWx1ZSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCkubmFtZTtcclxuICBqb2JQb3B1cC52YWx1ZSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCkuam9iO1xyXG59XHJcbi8vINC90L7QstGL0LUg0LTQsNC90L3Ri9C1XHJcbmZ1bmN0aW9uIHNldFVzZXJJbmZvKGRhdGEpIHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcclxufVxyXG5cclxuY29uc3QgcG9wdXBFZGl0Rm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKGVkaXRGb3JtU2VsZWN0b3IsIChkYXRhKSA9PiB7XHJcbiAgc2V0VXNlckluZm8oZGF0YSlcclxufSk7XHJcblxyXG5lZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHNldElucHV0VmFsdWUoKVxyXG4gIHBvcHVwRWRpdEZvcm0ub3BlblBvcHVwKCk7XHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRFcnJvclZhbGlkYXRpb24oKTtcclxufSlcclxuXHJcbnBvcHVwRWRpdEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHBvcHVwQWRkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKGFkZEZvcm1TZWxlY3RvciwgKGRhdGEpID0+IHtcclxuICAgIGVsZW1lbnRzU2VjdGlvbi5wcmVwZW5kKGNyZWF0TmV3Q2FyZChkYXRhKSk7XHJcbn0pO1xyXG5cclxuYWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT57XHJcbiAgcG9wdXBBZGRGb3JtLm9wZW5Qb3B1cCgpO1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IudG9vZ2xlQnV0dG9uU3RhdGUoKTtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0RXJyb3JWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxucG9wdXBBZGRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNvbnNvbGUubG9nKGluaXRpYWxDYXJkcykiXSwibmFtZXMiOlsiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZXZ0IiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2VsZW1lbnQiLCJyZW1vdmUiLCJhZGRFdmVudExpc3RlbmVyIiwiX2FkZGxpa2UiLCJfZGVsZXRlRWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9zZXRFdmVudExpc3RuZXJzIiwiZWxlbWVudEltYWdlIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2luaXRpYWxBcnJheSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsImZvckVhY2giLCJpdGVtIiwiRm9ybVZhbGlkYXRvciIsInZhbGlkYXRpb25Db25maWciLCJlbGVtZW50Rm9ybSIsIl92YWxpZGF0aW9uQ29uZmlnIiwiX2VsZW1lbnRGb3JtIiwiX3N1Ym1pdEJ1dHRvbiIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzZXRBdHRyaWJ1dGUiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwicmVtb3ZlQXR0cmlidXRlIiwidG9vZ2xlQnV0dG9uU3RhdGUiLCJfaXNWYWxpZCIsIl9zZXRFdmVudExpc3RlbmVyIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwia2V5IiwiY2xvc2VQb3B1cCIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3JtRnVuY3Rpb24iLCJfc3VibWl0Rm9ybUZ1bmN0aW9uIiwiX2Zvcm0iLCJpbnB1dExpc3QiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZVBvcHVwUGljdHVyZSIsIl9zdWJ0aXRsZVBvcHVwIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9qb2IiLCJqb2IiLCJpbmZvIiwiZm9ybVNlbGVjdG9yIiwiaW5pdGlhbENhcmRzIiwiZWRpdEJ0biIsImFkZEJ0biIsIm5hbWVQb3B1cCIsImpvYlBvcHVwIiwicG9wdXBFZGl0IiwicG9wdXBBZGQiLCJlbGVtZW50c1NlY3Rpb24iLCJ1c2VySW5mbyIsImVkaXRGb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsImFkZEZvcm1WYWxpZGF0b3IiLCJpbWFnZVdpdGhQb3B1cCIsIm9wZW5Qb3B1cEltYWdlIiwiY3JlYXROZXdDYXJkIiwiZ2VuZXJhdGVDYXJkIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJkZWZhdWx0Q2FyZHMiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJwb3B1cEVkaXRGb3JtIiwic2V0VXNlckluZm8iLCJnZXRVc2VySW5mbyIsIm9wZW5Qb3B1cCIsInJlc2V0RXJyb3JWYWxpZGF0aW9uIiwicG9wdXBBZGRGb3JtIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=